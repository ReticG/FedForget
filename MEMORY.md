# FedForget é¡¹ç›®å·¥ä½œè®°å¿†

## é¡¹ç›®ä¿¡æ¯
- **é¡¹ç›®åç§°**: FedForget - åŸºäºæƒé‡è°ƒæ•´çš„è”é‚¦é—å¿˜æ¡†æ¶
- **GitHub**: https://github.com/ReticG/FedForget
- **æœåŠ¡å™¨**: Featurize.cn RTX 4090
- **å·¥ä½œç›®å½•**: `/home/featurize/fedforget`
- **å¼€å§‹æ—¥æœŸ**: 2025-10-04

---

## å½“å‰çŠ¶æ€ (2025-10-04 08:30 UTC)

### âœ… å·²å®Œæˆ
1. **ç¯å¢ƒé…ç½®**
   - âœ“ SSHè¿æ¥æµ‹è¯•æˆåŠŸ
   - âœ“ GPUç¡®è®¤: NVIDIA GeForce RTX 4090 (24GB)
   - âœ“ Python 3.11.8 + PyTorch 2.2.2 (CUDA 12.1)
   - âœ“ ä¾èµ–åŒ…: NumPy, Pandas, Matplotlibå·²å®‰è£…
   - âœ“ ç£ç›˜ç©ºé—´: 657GB å¯ç”¨

2. **é¡¹ç›®ç»“æ„**
   - âœ“ ä»GitHubå…‹éš†ä»£ç 
   - âœ“ åˆ›å»ºç›®å½•ç»“æ„: src/, results/, checkpoints/, logs/, scripts/, configs/

3. **æ–‡æ¡£å‡†å¤‡**
   - âœ“ spec.md - æ ¸å¿ƒideaå’ŒæŠ€æœ¯æ–¹æ¡ˆ
   - âœ“ experiment.md - å®Œæ•´å®éªŒè®¾è®¡
   - âœ“ deployment.md - 4æœåŠ¡å™¨éƒ¨ç½²æ–¹æ¡ˆ
   - âœ“ README.md - é¡¹ç›®æ–‡æ¡£

### ğŸš§ è¿›è¡Œä¸­
- **å®ç°æ ¸å¿ƒä»£ç **: å‡†å¤‡å¼€å§‹ç¼–å†™FedForgetç®—æ³•

### â³ å¾…åŠäº‹é¡¹
1. ä¸‹è½½MNISTæ•°æ®é›†
2. å®ç°è”é‚¦å­¦ä¹ åŸºç¡€æ¡†æ¶
3. å®ç°FedForgetæ ¸å¿ƒç®—æ³•
4. è¿è¡Œç¬¬ä¸€ä¸ªMNISTå¿«é€ŸéªŒè¯å®éªŒ
5. å‚æ•°é¢„ç­›é€‰
6. Day 2å†³ç­–ï¼šæ˜¯å¦æ‰©å±•åˆ°4å°æœåŠ¡å™¨

---

## å®éªŒè®¡åˆ’

### é˜¶æ®µ1: å¿«é€ŸéªŒè¯ (Day 1-2, å½“å‰)
**ç›®æ ‡**: éªŒè¯FedForgetåŸºæœ¬å¯è¡Œæ€§
**é¢„ç®—**: 1å°æœåŠ¡å™¨ Ã— 48å°æ—¶ = Â¥90
**å…³é”®æŒ‡æ ‡**: MIA ASR < 60%, Test Acc > 85%

**ä»»åŠ¡åˆ—è¡¨**:
- [x] ç¯å¢ƒé…ç½®
- [x] é¡¹ç›®ç»“æ„åˆ›å»º
- [ ] å®ç°æ ¸å¿ƒä»£ç æ¨¡å—
  - [ ] `src/data/datasets.py` - æ•°æ®åŠ è½½å™¨
  - [ ] `src/models/cnn.py` - æ¨¡å‹å®šä¹‰
  - [ ] `src/federated/client.py` - è”é‚¦å®¢æˆ·ç«¯
  - [ ] `src/federated/server.py` - è”é‚¦æœåŠ¡å™¨
  - [ ] `src/unlearning/fedforget.py` - FedForgetæ ¸å¿ƒç®—æ³•
  - [ ] `src/utils/metrics.py` - è¯„ä¼°æŒ‡æ ‡ï¼ˆMIAï¼‰
- [ ] MNISTå¿«é€Ÿå®éªŒ
- [ ] å‚æ•°é¢„ç­›é€‰ (Î» âˆˆ {2,3,5,10}, T âˆˆ {1,2,5})

### é˜¶æ®µ2: ä¸»å®éªŒå¹¶è¡Œ (Day 3-7)
**æ¡ä»¶**: é˜¶æ®µ1éªŒè¯æˆåŠŸå
**é¢„ç®—**: 4å°æœåŠ¡å™¨ Ã— 120å°æ—¶ = Â¥898

### é˜¶æ®µ3: è¡¥å……éªŒè¯ (Day 8-10)
**é¢„ç®—**: 2å°æœåŠ¡å™¨ Ã— 72å°æ—¶ = Â¥269

---

## æŠ€æœ¯æ–¹æ¡ˆæ ¸å¿ƒè¦ç‚¹

### FedForgetç®—æ³•
1. **å®¢æˆ·ç«¯ä¾§**: è´Ÿæƒé‡çŸ¥è¯†è’¸é¦
   - æ­£å‘å­¦ä¹ : ä»å…¨å±€æ¨¡å‹å­¦ä¹ å…¶ä»–å®¢æˆ·ç«¯çŸ¥è¯†
   - åå‘å­¦ä¹ : ç§»é™¤è‡ªèº«å†å²è´¡çŒ®
   - å‚æ•°: Î»_forget (é—å¿˜æƒé‡), T (è’¸é¦æ¸©åº¦)

2. **æœåŠ¡å™¨ä¾§**: åŠ¨æ€æƒé‡è°ƒæ•´
   - é—å¿˜å®¢æˆ·ç«¯æƒé‡ = åŸºç¡€æƒé‡ Ã— é—å¿˜å› å­ Ã— è´¨é‡å› å­
   - æƒé‡çº¦æŸ: w_max (å•å®¢æˆ·ç«¯ä¸Šé™)
   - æ¸è¿›è°ƒæ•´: Î³ (è°ƒæ•´ç‡)

3. **è¯„ä¼°æŒ‡æ ‡**:
   - MIA ASR (æˆå‘˜æ¨æ–­æ”»å‡»æˆåŠŸç‡): ç›®æ ‡ â‰ˆ 50%
   - Test Accuracy: ç›®æ ‡ > 95% Ã— Retrain
   - Speedup: ç›®æ ‡ â‰¥ 5Ã—

---

## ä»£ç å®ç°ä¼˜å…ˆçº§

### P0 (æœ€é«˜ä¼˜å…ˆçº§ - ä»Šå¤©å®Œæˆ)
1. **æ•°æ®åŠ è½½** (`src/data/datasets.py`)
   - MNISTæ•°æ®é›†ä¸‹è½½å’Œåˆ†å‰²
   - è”é‚¦æ•°æ®åˆ†å¸ƒï¼ˆIIDï¼‰
   
2. **åŸºç¡€æ¨¡å‹** (`src/models/cnn.py`)
   - ConvNet (2 conv + 1 fc)
   
3. **è”é‚¦å­¦ä¹ æ¡†æ¶** (`src/federated/`)
   - FedAvgåŸºçº¿å®ç°
   - å®¢æˆ·ç«¯æœ¬åœ°è®­ç»ƒ
   - æœåŠ¡å™¨èšåˆ
   
4. **å¿«é€ŸéªŒè¯è„šæœ¬** (`scripts/quick_test.py`)
   - 10ä¸ªå®¢æˆ·ç«¯ Ã— 10è½®è®­ç»ƒ
   - éªŒè¯åŸºç¡€åŠŸèƒ½

### P1 (é«˜ä¼˜å…ˆçº§ - Day 1-2)
5. **FedForgetæ ¸å¿ƒ** (`src/unlearning/fedforget.py`)
   - è´Ÿæƒé‡è’¸é¦
   - åŠ¨æ€æƒé‡è°ƒæ•´
   
6. **è¯„ä¼°æŒ‡æ ‡** (`src/utils/metrics.py`)
   - MIAå®ç°ï¼ˆå½±å­æ¨¡å‹ï¼‰
   - Test Accuracy

7. **ä¸»å®éªŒè„šæœ¬** (`scripts/exp1_baseline.py`)
   - å‚æ•°ç½‘æ ¼æœç´¢
   - ç»“æœä¿å­˜

### P2 (ä¸­ä¼˜å…ˆçº§ - åç»­)
8. åŸºçº¿æ–¹æ³•å®ç° (FedEraser, Fine-tuning)
9. å¯è§†åŒ–å·¥å…·
10. W&Bé›†æˆ

---

## å…³é”®å‚æ•°é…ç½®

### è”é‚¦å­¦ä¹ é…ç½®
```python
num_clients = 10
participation_rate = 0.1  # æ¯è½®10%å®¢æˆ·ç«¯
local_epochs = 5
batch_size = 32
learning_rate = 0.01
total_rounds = 50  # å¿«é€ŸéªŒè¯ç”¨50è½®
```

### FedForgetå‚æ•°
```python
lambda_forget = 3.0  # é—å¿˜æƒé‡ç³»æ•° (å¾…è°ƒä¼˜)
distill_temp = 2.0   # è’¸é¦æ¸©åº¦ (å¾…è°ƒä¼˜)
weight_max = 0.5     # å•å®¢æˆ·ç«¯æƒé‡ä¸Šé™
gamma = 0.2          # æ¸è¿›è°ƒæ•´ç‡
```

### é—å¿˜åœºæ™¯
```python
unlearn_client_id = 5  # é—å¿˜ç¬¬5ä¸ªå®¢æˆ·ç«¯
unlearn_ratio = 0.2    # é—å¿˜20%æ•°æ®
unlearn_at_round = 30  # ç¬¬30è½®å¼€å§‹é—å¿˜
```

---

## æ•°æ®é›†ä¿¡æ¯

### MNIST
- Train: 60,000 samples
- Test: 10,000 samples
- Classes: 10
- æ¯å®¢æˆ·ç«¯: 6,000 samples (10ä¸ªå®¢æˆ·ç«¯)
- é—å¿˜æ¯”ä¾‹: 10% = 600 samples

### ä¸‹è½½å‘½ä»¤
```python
from torchvision import datasets
datasets.MNIST(root=./data, train=True, download=True)
datasets.MNIST(root=./data, train=False, download=True)
```

---

## é¢„æœŸç»“æœ (å¿«é€ŸéªŒè¯)

### æˆåŠŸæ ‡å‡†
- MIA ASR < 60% (é—å¿˜æ•ˆæœæ˜¾è‘—)
- Test Acc > 85% (æ¨¡å‹æ•ˆç”¨ä¿æŒ)
- è®­ç»ƒæ—¶é—´ < 3å°æ—¶ (æ•ˆç‡éªŒè¯)

### å†³ç­–ç‚¹ (Day 2)
- âœ… è‹¥è¾¾æ ‡ â†’ æ‰©å±•åˆ°4å°æœåŠ¡å™¨ï¼Œè¿›å…¥é˜¶æ®µ2
- âŒ è‹¥ä¸è¾¾æ ‡ â†’ è°ƒæ•´ç®—æ³•æˆ–ç»ˆæ­¢é¡¹ç›®

---

## æ–‡ä»¶è·¯å¾„é€ŸæŸ¥

### æ ¸å¿ƒä»£ç 
- `~/fedforget/src/data/datasets.py` - æ•°æ®åŠ è½½
- `~/fedforget/src/models/cnn.py` - æ¨¡å‹å®šä¹‰
- `~/fedforget/src/federated/client.py` - å®¢æˆ·ç«¯
- `~/fedforget/src/federated/server.py` - æœåŠ¡å™¨
- `~/fedforget/src/unlearning/fedforget.py` - FedForgetç®—æ³•
- `~/fedforget/src/utils/metrics.py` - è¯„ä¼°æŒ‡æ ‡

### å®éªŒè„šæœ¬
- `~/fedforget/scripts/quick_test.py` - å¿«é€ŸéªŒè¯
- `~/fedforget/scripts/download_data.py` - æ•°æ®ä¸‹è½½
- `~/fedforget/scripts/exp1_baseline.py` - å®éªŒ1

### ç»“æœè¾“å‡º
- `~/fedforget/results/` - å®éªŒç»“æœ
- `~/fedforget/checkpoints/` - æ¨¡å‹æ£€æŸ¥ç‚¹
- `~/fedforget/logs/` - è®­ç»ƒæ—¥å¿—

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨ (ç«‹å³æ‰§è¡Œ)

1. **åˆ›å»ºæ•°æ®ä¸‹è½½è„šæœ¬** â†’ `scripts/download_data.py`
2. **å®ç°æ•°æ®åŠ è½½å™¨** â†’ `src/data/datasets.py`
3. **å®ç°CNNæ¨¡å‹** â†’ `src/models/cnn.py`
4. **å®ç°FedAvg** â†’ `src/federated/{client,server}.py`
5. **è¿è¡Œå¿«é€Ÿæµ‹è¯•** â†’ `scripts/quick_test.py`

---

## æ³¨æ„äº‹é¡¹

### èµ„æºç®¡ç†
- å½“å‰æœåŠ¡å™¨: 1å° RTX 4090
- æˆæœ¬: Â¥1.87/å°æ—¶
- å·²è¿è¡Œæ—¶é—´: ~0.5å°æ—¶
- å‰©ä½™é¢„ç®—: ~47.5å°æ—¶ (Day 1-2)

### é‡è¦æé†’
- æ¯å°æ—¶ä¿å­˜checkpoint
- å®šæœŸåŒæ­¥ä»£ç åˆ°GitHub
- ç›‘æ§GPUåˆ©ç”¨ç‡ (åº” > 90%)
- è®°å½•æ‰€æœ‰å®éªŒè¶…å‚æ•°

### è”ç³»ä¿¡æ¯
- GitHub: ReticG
- Email: 332982539@qq.com

---

**æœ€åæ›´æ–°**: 2025-10-04 08:30 UTC
**æ›´æ–°äºº**: Claude (åˆå§‹åŒ–)
**ä¸‹æ¬¡æ›´æ–°**: å®ç°å®Œæ ¸å¿ƒä»£ç å
