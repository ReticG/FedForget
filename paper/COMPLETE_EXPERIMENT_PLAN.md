# FedForget 完整实验补充计划

## 🎯 目标: 达到顶会发表标准

基于NeurIPS/ICML论文调研，我们需要补充关键实验以达到充分说服力。

---

## 📊 当前实验 vs 顶会标准

### ✅ 已完成且优秀的部分

| 维度 | 我们的工作 | 顶会标准 | 评价 |
|-----|----------|---------|------|
| **Non-IID验证** | 5种α值 (0.1~1.0) | 通常1-2种 | ⭐⭐⭐ 超越标准 |
| **隐私评估** | SimpleMIA + Shadow MIA | 通常只有SimpleMIA | ⭐⭐⭐ 超越标准 |
| **数据集多样性** | CIFAR-10 + CIFAR-100 | CIFAR-10 | ⭐⭐ 良好 |
| **基线对比** | Retrain + Fine-tuning | Retrain | ⭐⭐ 良好 |
| **消融实验** | 4变体 (运行中) | 必需 | ⭐⭐⭐ 完整 |

### ⚠️ 需要补充的关键实验

| 维度 | 我们的工作 | 顶会标准 | 差距 | 优先级 |
|-----|----------|---------|------|--------|
| **客户端规模** | 5 clients | 10-20 clients | 偏少 | 🔴 高 |
| **真实Non-IID** | Dirichlet模拟 | FEMNIST真实数据 | 缺失 | 🟡 中 |
| **多客户端遗忘** | 单客户端 | 1-3客户端 | 缺失 | 🟡 中 |
| **可复现性** | 单次 | 3次重复 | 待完成 | 🔴 高 |
| **已有方法对比** | 无 | FedEraser等 | 缺失 | 🟢 低 |

---

## 🚀 完整实验补充方案

### Phase 1: 必需实验 (1周，论文必须)

#### 1.1 客户端规模验证 (🔴 最高优先级)

**实验1: 10客户端完整对比**
- **数据集**: CIFAR-10
- **Non-IID**: α = 0.5 (最优配置)
- **方法**: Retrain, Fine-tuning, FedForget
- **评估**: 遗忘率、保持率、ASR、时间
- **重复次数**: 3次 (不同随机种子)
- **预计时间**: 12小时

**实验2: 20客户端扩展验证**
- **数据集**: CIFAR-10
- **Non-IID**: α = 0.5
- **方法**: FedForget (与Retrain对比)
- **评估**: 遗忘率、保持率、时间
- **重复次数**: 1次
- **预计时间**: 6小时

**实验3: 客户端规模对比分析**
- **配置**: 5, 10, 20 clients
- **方法**: FedForget
- **评估**: 可扩展性曲线
- **可视化**: 遗忘率 vs 客户端数量

---

#### 1.2 可复现性验证 (🔴 高优先级)

**当前配置重复实验**:
- **数据集**: CIFAR-10, 5 clients, α=0.5
- **随机种子**: 42, 123, 456
- **方法**: Retrain, Fine-tuning, FedForget
- **输出**: 均值 ± 标准差, 变异系数(CV)
- **预计时间**: 3-4小时 (已准备好脚本)

---

#### 1.3 消融实验完成 (🔴 高优先级)

**已运行中，等待完成**:
- ✅ FedForget (Full)
- 🔄 No Weight Adjustment
- ⏳ No Distillation
- ⏳ Single Teacher

**预计完成**: 今天晚上

---

#### 1.4 Shadow MIA完成 (🔴 高优先级)

**已运行中，等待完成**:
- 5个影子模型训练
- 攻击分类器训练
- 4个方法评估

**预计完成**: 今天晚上

---

### Phase 2: 强烈建议实验 (1周，增强说服力)

#### 2.1 真实Non-IID数据集 (🟡 中优先级)

**实验: FEMNIST验证**
- **数据集**: FEMNIST (62类手写字符)
- **客户端**: 10个 (模拟真实设备)
- **特点**: 真实Non-IID分布 (每个设备有不同写字习惯)
- **方法**: Retrain, FedForget
- **评估**: 遗忘率、保持率、ASR
- **预计时间**: 8-10小时 (需要下载数据集)

**价值**:
- ✅ 证明FedForget在真实Non-IID场景有效
- ✅ 回应审稿人"合成数据"的质疑
- ✅ FEMNIST是联邦学习benchmark

---

#### 2.2 多客户端遗忘 (🟡 中优先级)

**实验1: 2/5客户端同时遗忘**
- **数据集**: CIFAR-10, α=0.5
- **遗忘**: Client 0 + Client 1
- **方法**: FedForget
- **评估**: 每个客户端的遗忘效果
- **预计时间**: 3小时

**实验2: 3/5客户端同时遗忘**
- **数据集**: CIFAR-10, α=0.5
- **遗忘**: Client 0 + Client 1 + Client 2
- **方法**: FedForget
- **评估**: 多客户端协同遗忘
- **预计时间**: 3小时

**实验3: 顺序遗忘 vs 同时遗忘**
- 对比: 先遗忘C0再遗忘C1 vs 同时遗忘C0+C1
- 评估: 效率和效果差异

**价值**:
- ✅ 证明实用性 (多用户同时请求遗忘)
- ✅ 验证动态权重调整的扩展性

---

#### 2.3 超参数敏感性分析 (🟡 中优先级)

**已有部分数据，需整理展示**:

**实验1: α (retention-forgetting balance)**
- 测试: α = 0.7, 0.8, 0.9, 0.93, 0.95, 0.98
- 展示: 遗忘率 vs 保持率 trade-off曲线

**实验2: λ_neg (negative learning strength)**
- 测试: λ_neg = 1.0, 2.0, 3.5, 5.0, 7.0
- 展示: 遗忘强度影响

**实验3: λ_forget (weight amplification)**
- 测试: λ_forget = 1.0, 1.5, 2.0, 3.0, 5.0
- 展示: 聚合权重影响

**价值**:
- ✅ 帮助其他研究者复现
- ✅ 展示算法robustness
- ✅ 回应"超参数敏感"质疑

**预计时间**: 2小时 (整理已有数据)

---

### Phase 3: 可选增强实验 (1周，锦上添花)

#### 3.1 已有联邦遗忘方法对比 (🟢 低优先级)

**实验: FedEraser实现与对比**

**挑战**: 需要实现FedEraser算法
- 存储历史更新
- 基于影响函数的遗忘

**对比维度**:
- 遗忘效果
- 存储开销 (我们优势)
- 隐私保护
- 通信成本

**预计时间**: 2-3天 (实现 + 实验)

**是否必需**: ❌ 不是必需，但强化竞争力

---

#### 3.2 更多数据集验证 (🟢 低优先级)

**候选数据集**:
- **Tiny-ImageNet**: 200类，复杂度高
- **CelebA**: 人脸属性，真实场景
- **Shakespeare**: 文本数据，验证泛化性

**价值**: 证明跨领域适用性

**预计时间**: 6-8小时/数据集

---

#### 3.3 理论分析 (🟢 低优先级，难度高)

**可能方向**:
1. **差分隐私保证**: 证明FedForget满足(ε,δ)-DP
2. **收敛性分析**: 证明遗忘过程收敛
3. **遗忘上界**: 理论推导最大遗忘率

**预计时间**: 1-2周 (需要理论功底)

**是否必需**: ❌ 纯实验论文也可接受

---

## 📅 推荐执行时间表

### Week 1: 必需实验 (Day 5-11)

| 日期 | 任务 | 预计时间 | 状态 |
|------|-----|---------|------|
| **Day 5** (今晚) | 等待消融+Shadow MIA完成 | 自动 | 🔄 |
| **Day 6** | 可复现性验证 (3次种子) | 4小时 | ⏳ |
| | 10客户端实验 (3次) | 12小时 | ⏳ |
| **Day 7** | 20客户端实验 | 6小时 | ⏳ |
| | 整理超参数敏感性 | 2小时 | ⏳ |
| **Day 8-9** | 分析所有结果 | 1天 | ⏳ |
| | 更新论文draft | 1天 | ⏳ |
| **Day 10-11** | LaTeX排版 | 2天 | ⏳ |

**Week 1完成后论文就绪度**: 85%

---

### Week 2: 强烈建议实验 (Day 12-18)

| 日期 | 任务 | 预计时间 | 状态 |
|------|-----|---------|------|
| **Day 12-13** | FEMNIST实验 | 10小时 | ⏳ |
| **Day 14** | 多客户端遗忘 (2/5, 3/5) | 6小时 | ⏳ |
| **Day 15-16** | 分析结果 + 更新论文 | 2天 | ⏳ |
| **Day 17-18** | 论文润色 + 内部审阅 | 2天 | ⏳ |

**Week 2完成后论文就绪度**: 95%

---

### Week 3: 可选增强 (Day 19-25)

| 日期 | 任务 | 预计时间 | 状态 |
|------|-----|---------|------|
| **Day 19-21** | (可选) FedEraser对比 | 3天 | ⏳ |
| **Day 22-23** | (可选) 更多数据集 | 2天 | ⏳ |
| **Day 24-25** | 最终润色 | 2天 | ⏳ |

**Week 3完成后论文就绪度**: 100%

---

## 🎯 不同投稿目标的建议

### 方案A: 稳妥期刊 (2周完成)

**完成**: Week 1必需实验
**投稿**: TIFS / TDSC
**接受概率**: 80-90%
**优势**: 快速发表，认可度高

**实验清单**:
- ✅ 消融实验
- ✅ Shadow MIA
- ✅ 可复现性 (3次)
- ✅ 10客户端验证
- ✅ 20客户端验证
- ✅ 超参数敏感性

---

### 方案B: 冲击顶会 (3周完成)

**完成**: Week 1 + Week 2
**投稿**: NeurIPS / ICML 2025
**接受概率**: 50-60%
**优势**: 认可度最高

**实验清单**:
- ✅ 方案A所有实验
- ✅ FEMNIST真实Non-IID
- ✅ 多客户端遗忘
- ✅ 客户端规模分析

---

### 方案C: 完美投稿 (4周完成)

**完成**: Week 1 + Week 2 + Week 3
**投稿**: NeurIPS / ICML (最强版本)
**接受概率**: 70-80%
**优势**: 实验最完整，无可挑剔

**实验清单**:
- ✅ 方案B所有实验
- ✅ FedEraser对比
- ✅ 更多数据集
- (可选) 理论分析

---

## 💡 我的推荐: 方案B (3周)

**理由**:
1. **时间可控**: 3周充分但不过长
2. **实验完整**: 覆盖所有关键维度
3. **竞争力强**: FEMNIST + 多客户端 + 规模验证
4. **性价比高**: Week 3的FedEraser投入产出比低

**关键补充**:
- 10/20客户端规模验证 → 符合顶会标准
- FEMNIST真实Non-IID → 回应"合成数据"质疑
- 多客户端遗忘 → 证明实用性

---

## 🔧 技术准备

### 需要创建的实验脚本

1. **`scripts/compare_10clients.py`**
   - 10客户端完整对比
   - 支持3次重复

2. **`scripts/compare_20clients.py`**
   - 20客户端扩展验证

3. **`scripts/femnist_experiment.py`**
   - FEMNIST数据加载
   - 10客户端遗忘实验

4. **`scripts/multi_client_unlearning.py`**
   - 2/5, 3/5客户端遗忘
   - 顺序 vs 同时对比

5. **`scripts/analyze_scalability.py`**
   - 客户端规模分析
   - 生成可视化

### 需要的数据集

- ✅ CIFAR-10 (已有)
- ✅ CIFAR-100 (已有)
- ⏳ FEMNIST (需下载，~1GB)

---

## 📊 预期论文结构更新

### Experiments章节增强

**4.1 Experimental Setup**
- 5, 10, 20 clients (规模验证)
- CIFAR-10, CIFAR-100, FEMNIST (数据集多样性)
- Dirichlet α + 真实Non-IID

**4.2 Main Results**
- 10 clients作为主要结果 (对齐ConDa等)
- 5 clients作为Non-IID深度分析

**4.3 Scalability Analysis** (新增)
- 5 vs 10 vs 20 clients
- 可扩展性曲线

**4.4 Real-World Validation** (新增)
- FEMNIST真实Non-IID结果
- 与合成数据对比

**4.5 Multi-Client Unlearning** (新增)
- 2/5, 3/5客户端同时遗忘
- 实用性验证

**4.6 Ablation Study**
- 4变体完整分析

**4.7 Hyperparameter Sensitivity**
- α, λ_neg, λ_forget敏感性

**4.8 Privacy Evaluation**
- SimpleMIA + Shadow MIA

**4.9 Reproducibility**
- 3次重复，均值±标准差

---

## ✅ 行动清单

**立即开始** (今晚-明天):
1. ✅ 监控消融实验完成
2. ✅ 监控Shadow MIA完成
3. ⏳ 准备10客户端实验脚本

**Day 6** (明天):
1. 运行可复现性验证
2. 运行10客户端实验 (3次)

**Day 7**:
1. 运行20客户端实验
2. 下载FEMNIST数据集

**Week 2**:
1. FEMNIST实验
2. 多客户端遗忘
3. 更新论文

---

## 🎊 总结

**当前状态**: 论文基础扎实，但需要补充规模验证和真实数据

**补充方案**: 3周完成方案B，达到NeurIPS/ICML投稿标准

**关键补充**:
1. 🔴 10/20客户端规模验证 (必需)
2. 🟡 FEMNIST真实Non-IID (强烈建议)
3. 🟡 多客户端遗忘 (强烈建议)

**预期结果**:
- 实验完整度: 95%
- 顶会接受概率: 50-60%
- 期刊接受概率: 90%+

你觉得这个完整计划如何? 我现在就可以开始准备10客户端的实验脚本!
